<?xml version="1.0"?>
<!--
 build.xml

 (c) Copyright, Real-Time Innovations, 2012.  All rights reserved.
 No duplications, whole or partial, manual or electronic, may be made
 without express written permission.  Any such copies, or
 revisions thereof, must display this notice unaltered.
 This code contains trade secrets of Real-Time Innovations, Inc.


 This ant file was automatically generated by rtiddsgen.

 To build, type:
 	ant
 	
 To run subscriber, type:
 	ant AccidentSubscriber
 	
 To run publisher, type:
 	ant AccidentPublisher
 	
 Note: This ant file is only meant to build our example applications and
       may require alterations to build on your system.
-->
<project name="Accident Example" default="compile" basedir=".">
	<!-- Set properties -->
	<property environment="env"/>

	<!-- Ant Properties are immutable. If NDDSHOME is already set this is a NOOP -->
	<property name="env.NDDSHOME" value="/home/stacy/rti_connext_dds-5.3.1"/>
	<!-- Set Build Path -->
	<path id="build.classpath.release">
		<fileset dir="${env.NDDSHOME}/lib/java" includes="**/nddsjava.jar" />
	</path>
	
	<path id="build.classpath.debug">
		<fileset dir="${env.NDDSHOME}/lib/java" includes="**/nddsjavad.jar" />
	</path>
  
	<!-- Deletes the existing build -->
	<target name="clean">
		<delete>
			<fileset dir="." includes="**/*.class" />
		</delete>
	</target>

	<!-- Build examples -->
	<target name="compile">
		<javac srcdir="." destdir="." includeantruntime="false" classpathref="build.classpath.release" />
		<jar destfile="AccidentExample.jar"
			basedir="."
			includes="**/*.class">
		</jar>
	</target>
	
	<target name="compile-debug">
		<javac srcdir="." destdir="." includeantruntime="false" classpathref="build.classpath.debug" debug="on"/>
		<jar destfile="AccidentExample-debug.jar"
			basedir="."
			includes="**/*.class">
		</jar>
	</target>
	
	<!-- Run release subscriber -->
	<target name="AccidentSubscriber" depends="compile">
		<java fork="true" failonerror="yes" classpathref="build.classpath.release" classpath="AccidentExample.jar" classname="AccidentSubscriber">
			<env key="LD_LIBRARY_PATH" path="${env.LD_LIBRARY_PATH};${env.NDDSHOME}/lib/x64Linux3gcc5.4.0"/>
			<arg value="0" description="Domain"/>
			<arg value="0" description="Max loop count"/>
		</java>
	</target>
	

	
	<!-- Run release publisher -->
	<target name="AccidentPublisher" depends="compile">
		<java fork="true" failonerror="yes" classpathref="build.classpath.release" classpath="AccidentExample.jar" classname="AccidentPublisher">
			<env key="LD_LIBRARY_PATH" path="${env.LD_LIBRARY_PATH};${env.NDDSHOME}/lib/x64Linux3gcc5.4.0"/>
			<arg value="0" description="Domain"/>
			<arg value="0" description="Max loop count"/>
		</java>
	</target>
	
	<!-- Run release Passenger1 -->
	<target name="Passenger1" depends="compile">
		<java fork="true" failonerror="yes" classpathref="build.classpath.release" classpath="AccidentExample.jar" classname="Passenger1">
			<env key="LD_LIBRARY_PATH" path="${env.LD_LIBRARY_PATH};${env.NDDSHOME}/lib/x64Linux3gcc5.4.0"/>
			<arg value="0" description="Domain"/>
			<arg value="0" description="Max loop count"/>
		</java>
	</target>
				
	<!-- Run release Passenger2 -->
	<target name="Passenger2" depends="compile">
		<java fork="true" failonerror="yes" classpathref="build.classpath.release" classpath="AccidentExample.jar" classname="Passenger2">
			<env key="LD_LIBRARY_PATH" path="${env.LD_LIBRARY_PATH};${env.NDDSHOME}/lib/x64Linux3gcc5.4.0"/>
			<arg value="0" description="Domain"/>
			<arg value="0" description="Max loop count"/>
		</java>
	</target>				
	
	<!-- Run debug subscriber -->
	<target name="AccidentSubscriber-debug" depends="compile-debug">
		<java fork="true" failonerror="yes" classpathref="build.classpath.debug" classpath="AccidentExample-debug.jar" classname="AccidentSubscriber">
			<env key="LD_LIBRARY_PATH" path="${env.LD_LIBRARY_PATH};${env.NDDSHOME}/lib/x64Linux3gcc5.4.0"/>
			<arg value="0" description="Domain"/>
			<arg value="0" description="Max loop count"/>
		</java>
	</target>
	
	<!-- Run debug publisher -->
	<target name="AccidentPublisher-debug" depends="compile-debug">
		<java fork="true" failonerror="yes" classpathref="build.classpath.debug" classpath="AccidentExample-debug.jar" classname="AccidentPublisher">
			<env key="LD_LIBRARY_PATH" path="${env.LD_LIBRARY_PATH};${env.NDDSHOME}/lib/x64Linux3gcc5.4.0"/>
			<arg value="0" description="Domain"/>
			<arg value="0" description="Max loop count"/>
		</java>
	</target>
	
	
	<!-- Run debug passenger1 -->
		<target name="Passenger1-debug" depends="compile-debug">
			<java fork="true" failonerror="yes" classpathref="build.classpath.debug" classpath="AccidentExample-debug.jar" classname="Passenger1">
				<env key="LD_LIBRARY_PATH" path="${env.LD_LIBRARY_PATH};${env.NDDSHOME}/lib/x64Linux3gcc5.4.0"/>
				<arg value="0" description="Domain"/>
				<arg value="0" description="Max loop count"/>
			</java>
		</target>
	<!-- Run debug passenger2 -->
		<target name="Passenger2-debug" depends="compile-debug">
			<java fork="true" failonerror="yes" classpathref="build.classpath.debug" classpath="AccidentExample-debug.jar" classname="Passenger2">
				<env key="LD_LIBRARY_PATH" path="${env.LD_LIBRARY_PATH};${env.NDDSHOME}/lib/x64Linux3gcc5.4.0"/>
				<arg value="0" description="Domain"/>
				<arg value="0" description="Max loop count"/>
			</java>
		</target>
	
</project>